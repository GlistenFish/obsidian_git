# sed  
## 运行原理  

![](Pasted%20image%2020240328141117.png)      
   

## 增删改查        
### 参数    

| 选项     | 说明                          |
| ------ | --------------------------- |
| -n     | 取消默认输出                      |
| -r     | sed 支持扩展正则                  |
| -i     | 修改源文件内容                     |
| -i.bak | 备份后再对源文件进行修改（这个参数必须是最后一个参数） |  
  
### 常规内容
#### 1）案例01:取出文件的第3行    
```sh  
sed -n '3p' /etc/passwd
```
  
#### 案例02:取出/etc/passwd 的第2行到第5行  
```sh  
sed -n '2,5p' /etc/passwd
```  
  
#### 案例03：过滤出/etc/passwd 中包含 root 的行  
```sh  
grep 'root' /etc/passwd  
#or  
sed -n '/root/p' /etc/passwd  
#start with root  
sed -n '/^root/p' /etc/passwd
```  
>⚠attention
>sed 进行过滤的时候需要使用 // 并且里面支持基础正则
>如果需要扩展正则需要使用 sed -r
  
#### 案例04：获取范围内的日志  
```sh  
sed -n '/开始位置/,/结束位置/p' test.txt
```  
  
- 试着取出 access.log 过滤出 11:05 - 11:06 的日志  
```sh  
sed -n '/Mar\/2024:11:05:00/,/Mar\/2024:11:06:00/p' access.log
```  
  
#### 只显示第2行和第5行  
```sh  
sed -n '2p;5p' test.txt
```  
  
#### 表示有规律地查找    
```sh  
glisten@GUbu:~$ seq 10 | sed -n '1~2p'
1
3
5
7
9
glisten@GUbu:~$ seq 10 | sed -n '3~2p'
3
5
7
9
```  
表示第 n 行开始，每2行显示一次  
  
 #### 把文件中的 guest 替换成glisten
 ```sh
 sed 's#guest#glisten#g' test.txt
 ```
 
 >sed 's\#被替换的\#替换成的\#g' test.txt
 >sed 's\#\#\#g' test.txt
 >s substitute
 >g global
- 修改文件内容要加 -i
  不加 -i 不会修改源文件    

 >sed 命令替换的时候
 >也可以写成 s\@\@\@g s\|\|\|g
  
 >使用 -i.bak 自动备份后再修改
  
### 后向引用  
#### 格式  
 >应用说明：
 >sed 命令用于处理列的方式
 >使用格式：
 >使用替换的形式 s\#\#\#g
 >前两个 sharp 符之间通过正则加 `()` 进行分组  
  
```sh  
glisten@GUbu:~$ echo {1..10}
1 2 3 4 5 6 7 8 9 10
glisten@GUbu:~$ echo {1..10} | sed -r 's#([0-9]+)#<\1>#g'
<1> <2> <3> <4> <5> <6> <7> <8> <9> <10>
```
  
#### 案例01:调换/etc/passwd 第1列和最后一列内容  
```sh  
sed -r 's#^(.*)(:x.*:)(.*$)#\3\2\1#g' ./passwd
```
  
  
  
  
  
  
  
  
  
  
  
  

# awk  
